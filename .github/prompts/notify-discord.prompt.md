---
mode: agent
---
# 前回のDiscordメッセージ以降のコミット内容をDiscordに通知するコマンド

あなたは明晰な判断力を持つ熟練開発者です。

`.github/instructions/general.instructions.md` のガイドラインに従い、以下のタスクを遂行してください。

**think:タスク: 前回のDiscordメッセージ以降のコミット内容を分析し、簡潔にDiscordに通知する。**

**実行手順:**

1. **前提条件の確認**:
    以下のツールが使用可能であることを確認してください。使用不可能な場合は操作を中止し、ユーザーに対応を求めてください。
    * `git --version` でGitの動作確認
    * MCP Discord機能の動作確認

2. **前回の通知内容の取得**:
    MCP経由で`1389372596273025135`チャンネルから最新のメッセージを取得し、前回の通知の日時とコミット情報を確認してください。前回通知が存在しない場合は、これまでの全コミットのまとめを送信対象とします。

3. **コミット履歴の分析**:
    `git log --oneline --since="<前回通知日時>"` を実行し、前回の通知以降に行われたコミットを特定してください。前回通知に含まれていたコミットハッシュと照合し、新しいコミットのみを抽出してください。

4. **変更内容の整理**:
    * `feat:` 新機能追加 - 表示上は`新機能の追加`
    * `fix:` バグ修正 - 表示上は`バグ修正`
    * `refactor:` リファクタリング - 表示上は`コードの改善`
    * `docs:` ドキュメント更新 - 表示上は`説明書・ガイドラインの更新`
    * `style:` コードスタイル修正・フォーマット - 表示上は`コードの書式調整`
    * `test:` テスト追加・修正 - 表示上は`動作確認の追加・修正`
    * `perf:` パフォーマンス改善 - 表示上は`動作速度の改善`
    * `build:` ビルドシステムや外部依存関係の変更 - 表示上は`システム構築の変更`
    * `ci:` CI設定の変更 - 表示上は`自動化設定の変更`
    * `chore:` その他のメンテナンス作業 - 表示上は`その他の保守作業`

    各コミットの内容を、上記のカテゴリに分類し、簡潔にまとめてください。

5. **通知の必要性判定**:
    新しいコミットが存在しない場合は、通知を送信せずに処理を終了してください。新しいコミットが存在する場合のみ、次のステップに進んでください。

6. **通知メッセージの作成**:
    整理した内容を基に、以下の要件を満たす**日本語**のメッセージを作成してください:
    * 変更内容を中立的かつ俯瞰的に記述
    * 褒め称える表現や主観的評価は避ける
    * 事実ベースの簡潔な報告
    * 重要な変更を優先的に記載
    * 1つのコミットに対して1行で要約する

7. **Discordへの通知**:
    MCP経由で`1389372596273025135`チャンネルに、作成したメッセージを投稿してください。

**今回限定の特記事項**:

```markdown
$ARGUMENTS
```

**厳守しなさい**:

* 自己宣伝を含む表現を使用しないこと
* 非感情的で、事実に基づいた中立的な表現を使用すること
* 技術的な詳細は簡潔にまとめること
* 開発者以外にも理解しやすい表現を心がけること
* 前回通知済みのコミットを重複して通知しないこと
