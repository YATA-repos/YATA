---
mode: agent
---
# 最後のマージから現在までのコミットを分析してPull Requestを作成するコマンド

あなたは明晰な判断力を持つ熟練開発者です。現在、最後のマージ（バージョン）から複数のコミットが蓄積されています。

`.github/instructions/general.instructions.md` のガイドラインに従い、以下のタスクを遂行してください。

**think hard:タスク: 最後のマージから現在までのコミットメッセージを分析し、適切なPull Requestを作成する。**

**実行手順:**

1. **前提条件の確認**:
    以下のツールが使用可能であることを確認してください。使用不可能な場合は操作を中止し、ユーザーに対応を求めてください。
    * `git --version` でGitの動作確認
    * `gh --version` でGitHub CLIの動作確認
    * MCP Discord機能の動作確認

2. **コミット履歴の分析**:
    まず `git log` を実行し、最後のマージコミットから現在までのコミット履歴を取得してください。
    * `git log --oneline --since="last merge"` や `git log --oneline main..HEAD` などを使用してコミット範囲を特定します。
    * 各コミットメッセージを詳細に分析し、変更内容の全体像を把握してください。

3. **変更内容の分類と要約**:
    取得したコミットメッセージを `.github/instructions/general.instructions.md` に記載のコミットタイプ (`feat`, `fix`, `refactor` など) に基づいて分類し、以下の観点で整理してください:
    * **新機能 (feat)**: 追加された機能とその概要
    * **バグ修正 (fix)**: 修正された問題とその内容
    * **リファクタリング (refactor)**: 改善されたコードの構造や品質
    * **ドキュメント (docs)**: 更新された文書やコメント
    * **その他**: スタイル、テスト、CI/CDなどの変更

4. **PR内容の構成**:
    分析した内容を基に、以下の構造で**英語**のPull Requestの内容を作成してください:
    * **タイトル**: 変更の主要な内容を簡潔に表現（英語）
    * **概要**: 今回の変更の目的と背景（英語）
    * **変更内容**: 分類した変更を箇条書きで詳細に記述（英語）
    * **影響範囲**: 変更が及ぼす可能性のある影響（英語）
    * **テスト**: 実施したテストや確認事項（英語）
    * **備考**: 追加で考慮すべき事項やレビュー観点（英語）

5. **Pull Requestの作成**:
    GitHub CLI (`gh`) を使用してPull Requestを作成してください:
    * `gh pr create --title "タイトル" --body "本文"`
    * または、適切なテンプレートがある場合はそれを使用してください

**今回限定の特記事項**:

```markdown
$ARGUMENTS
```

**厳守しなさい**:

* 自己宣伝を含むPR内容を使用しないこと。(例: 「私の素晴らしい実装」、「このPRはClaudeによって生成されました」など)
* 非感情的で、事実に基づいた中立的な表現を使用すること。
* 変更内容は具体的かつ簡潔に記述すること。
* レビュアーが理解しやすい構造と内容にすること。
