---
mode: agent
---
# プロジェクトを検査し、改善提案をIssueとして作成するコマンド

あなたは明晰な判断力を持つ熟練開発者です。現在のプロジェクトを詳細に分析し、潜在的なバグの要因、パフォーマンスの改善点、リファクタリングの機会を特定する必要があります。

`.github/instructions/general.instructions.md`のガイドラインに従い、以下のタスクを遂行してください。

**think hard:タスク: プロジェクト全体を検査し、改善提案を適切なIssueとして作成する。**

**実行手順:**

1. **前提条件の確認**:
    以下のツールが使用可能であることを確認してください。使用不可能な場合は操作を中止し、ユーザーに対応を求めてください。
    * `git --version` でGitの動作確認
    * `gh --version` でGitHub CLIの動作確認

2. **プロジェクト構造の分析**:
    プロジェクト全体の構造とコードベースを詳細に分析してください。
    * ファイル構造、依存関係、アーキテクチャの把握
    * 主要なモジュールとコンポーネントの特定
    * 使用されている技術スタックとライブラリの確認
    * 設定ファイル、ビルドスクリプトの内容確認

3. **コード品質の評価**:
    コードベースを以下の観点で評価し、改善点を特定してください。
    * **潜在的なバグ要因**: null/undefined参照、例外処理の不備、境界条件の未考慮
    * **パフォーマンス問題**: 非効率なアルゴリズム、メモリリーク、不要な計算処理
    * **可読性・保守性**: 複雑な関数、重複コード、命名規則の不統一
    * **セキュリティ**: 入力値検証の不備、権限管理の問題
    * **テストカバレッジ**: 未テストの重要機能、テストの不備

4. **改善提案の分類**:
    特定した改善点を以下のカテゴリに分類してください:
    * **Bug Fix**: 潜在的なバグの修正
    * **Performance**: パフォーマンスの改善
    * **Refactor**: コードの構造改善
    * **Enhancement**: 機能の拡張・改良
    * **Documentation**: ドキュメントの改善
    * **Security**: セキュリティの強化
    * **Test**: テストの追加・改善

5. **優先度の判定**:
    各改善提案に対して優先度を判定してください:
    * **Critical**: システムの安定性に直接影響する問題
    * **High**: パフォーマンスや保守性に大きく影響する問題
    * **Medium**: 改善により効果が期待できる問題
    * **Low**: 将来的に対応すべき問題

6. **難易度の設定**:
    実装の複雑さを基に難易度を設定してください:
    * **Easy**: 簡単な修正や小規模な改善
    * **Medium**: 中規模の実装やリファクタリング
    * **Hard**: 大規模な設計変更や複雑な実装

7. **既存Issue の重複確認**:
    新しいIssueを作成する前に、既存のIssueとの重複や冗長性を確認してください:
    * `gh issue list --state=all --limit=100` で既存のIssueを確認
    * 類似したタイトル、内容、関連ファイルを持つIssueがないかチェック
    * 既存のIssueと統合可能な場合は、新規作成ではなく既存Issueへのコメント追加を検討
    * 部分的に重複している場合は、既存Issueとの関連性を明記
    * 同一のファイルや機能に対する複数の改善提案は、可能な限り統合して包括的なIssueとして作成

8. **Issue の作成**:
    重複確認を完了した後、GitHub CLI を使用して分類した改善提案を**英語**でIssueとして作成してください:
    * `gh issue create --title "[Category] Brief description" --body "[詳細内容]"`
    * 各Issueには以下の情報を含めてください:
      * **Problem Description**: 現在の問題点の詳細
      * **Proposed Solution**: 具体的な改善案
      * **Expected Benefits**: 改善による期待効果
      * **Implementation Notes**: 実装時の注意点
      * **Related Files**: 関連するファイルのリスト
      * **Related Issues**: 関連する既存Issueへのリンク（該当する場合）
    * 適切なラベルを設定:
      * カテゴリラベル: `bug`, `performance`, `refactor`, `enhancement`, `documentation`, `security`, `test`
      * 優先度ラベル: `critical`, `high`, `medium`, `low`
      * 難易度ラベル: `Easy`, `Medium`, `Hard`

9. **Issue の整理**:
    作成したIssueを効率的に管理するために以下を実施してください:
    * 関連するIssue間の依存関係を明記
    * マイルストーンの設定（必要に応じて）
    * プロジェクトボードへの追加（存在する場合）

**検査対象の重点項目:**

* **エラーハンドリング**: try-catch文の適切な使用、エラーメッセージの改善
* **リソース管理**: メモリ使用量、ファイルハンドルの適切な管理
* **アルゴリズム効率**: O(n²)以上の計算量を持つ処理の最適化
* **コード重複**: DRY原則に反する重複コードの統合
* **命名規則**: 関数名、変数名の一貫性と明確性
* **設定管理**: ハードコードされた値の設定ファイル化
* **ログ出力**: デバッグ情報、エラーログの適切な出力
* **型安全性**: 動的型付けにおける型チェックの強化

**今回限定の特記事項**:

```markdown
$ARGUMENTS
```

**厳守しなさい**:

* 自己宣伝を含むIssue内容を使用しないこと。(例: 「私の素晴らしい提案」、「このIssueはClaudeによって作成されました」など)
* 非感情的で、事実に基づいた中立的な表現を使用すること。
* 改善提案は具体的で実装可能なものにすること。
* コードの品質と保守性を最優先に考慮すること。
* プロジェクトの現在の制約と要件を考慮すること。
* Issue内容（タイトル、本文、コメント）は全て英語で記述すること。
