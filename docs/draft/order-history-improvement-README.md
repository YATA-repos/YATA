# 注文履歴カード改善プロジェクト - ドキュメント概要

## 📋 プロジェクト概要

注文履歴画面において、注文履歴カードの高さが過剰で一覧性に欠けるという問題に対する改善提案と実装計画をまとめたドキュメント群です。

## 📚 ドキュメント構成

### 1. 現状分析
**ファイル**: `2025-10-01-order-history-card-height-analysis.md`

**内容**:
- 現在の`_OrderHistoryCard`の構造分析
- 高さが大きくなる原因の特定
- 最小/最大ケースでの高さ試算
- 問題点のまとめ

**主な発見**:
- 最小ケース: 約148px
- 最大ケース: 約220-240px
- パディング・マージンの積み重ねが主因
- 注文明細の展開表示が高さを不均一にしている

---

### 2. 改善提案
**ファイル**: `2025-10-01-order-history-card-improvement-proposal.md`

**内容**:
- 3つの改善案の提示と比較
  - **案A**: コンパクトカードレイアウト（推奨）
  - **案B**: テーブル風レイアウト
  - **案C**: 2段階表示（折りたたみ式）
- 推奨案の選定理由
- 補助的な改善案
- モバイル対応の考慮事項

**推奨案（案A）の効果**:
- 高さを約40%削減（148px → 88px）
- 情報を2行に集約
- 実装が比較的容易

---

### 3. 実装計画
**ファイル**: `../plan/2025-10-01-order-history-card-improvement-plan.md`

**内容**:
- Phase 1-3に分けた段階的な実装計画
- 各変更箇所の詳細な実装手順
- Before/Afterのコード例
- テスト計画
- リスクと対応策
- 実装スケジュール（2-3日～9-11日）

**実装スコープ**:
1. **Phase 1**: 基本実装（パディング削減、注文明細の省略表示など）
2. **Phase 2**: 補助的改善（カード間余白、アイコンサイズなど）
3. **Phase 3**: 発展的改善（モバイル最適化、デザイントークン整理など）

---

### 4. UI/UX詳細設計
**ファイル**: `2025-10-01-order-history-card-ui-mockup.md`

**内容**:
- 詳細なレイアウト構造図
- カラー・フォント・スペーシングの具体的仕様
- インタラクション仕様（ホバー、タップ）
- レスポンシブ対応の詳細
- サンプルコード（完全版）
- エッジケースの処理

**視覚的な設計**:
- 第1行: 受付コード + ステータス | 金額 + 支払い方法
- 第2行: 👤顧客名 | 🕐日時 | 🛍️商品サマリー
- 合計高さ: 約88px（現状比40%削減）

---

## 🎯 推奨実装順序

### ステップ1: レビューと承認
- [ ] 本ドキュメント群のレビュー
- [ ] 推奨案（案A）の承認
- [ ] 実装優先度の確認

### ステップ2: Phase 1実装（2-3日）
- [ ] カード内パディングの削減
- [ ] 行間スペースの削減
- [ ] 注文明細の省略表示実装
- [ ] 顧客名・日時の1行統合
- [ ] 備考欄の非表示
- [ ] 単体テストの作成
- [ ] デバイステスト

### ステップ3: Phase 2実装（1日）
- [ ] カード間余白の削減
- [ ] アイコンサイズの統一
- [ ] フォントサイズの最適化

### ステップ4: Phase 3実装（オプション、3-5日）
- [ ] モバイル対応の最適化
- [ ] ページネーション件数の調整
- [ ] デザイントークンの整理

### ステップ5: フィードバックと改善
- [ ] ユーザーフィードバックの収集
- [ ] 必要に応じた微調整
- [ ] 案B・案Cの検討（必要な場合）

---

## 📊 期待される効果

### 定量的効果

| 指標 | 現状 | 改善後 | 改善率 |
|------|------|--------|--------|
| カード高さ（最小） | 148px | 88px | 40%削減 |
| カード高さ（平均） | 180px | 100px | 44%削減 |
| 1画面表示件数（1080p） | 5-6件 | 9-10件 | 約2倍 |
| 20件閲覧時のスクロール量 | 3600px | 2000px | 44%削減 |

### 定性的効果

- ✅ 一覧性の向上
- ✅ スクロール操作の削減
- ✅ 注文履歴の素早い確認が可能
- ✅ デザインの統一感向上

---

## ⚠️ 注意事項とリスク

### 情報量の削減

- 注文明細の詳細がカード上で確認できなくなる
- 備考が見えなくなる
- **対策**: 詳細ダイアログへの導線を明確に

### モバイルでの視認性

- フォントサイズが小さくなる可能性
- **対策**: モバイル専用のレスポンシブ調整を実装（Phase 3）

### ユーザーの慣れ

- 既存ユーザーが新しいレイアウトに慣れる必要がある
- **対策**: 段階的な展開、フィードバックの収集

---

## 🔗 関連ファイル

### ドキュメント
- `docs/draft/2025-10-01-order-history-card-height-analysis.md`
- `docs/draft/2025-10-01-order-history-card-improvement-proposal.md`
- `docs/draft/2025-10-01-order-history-card-ui-mockup.md`
- `docs/plan/2025-10-01-order-history-card-improvement-plan.md`

### ソースコード
- `lib/features/order/presentation/pages/order_history_page.dart`（主要変更対象）
- `lib/shared/foundations/tokens/spacing_tokens.dart`（参照）
- `lib/shared/foundations/tokens/typography_tokens.dart`（参照）
- `lib/shared/foundations/layout/responsive_helper.dart`（Phase 3で使用）

### テスト
- `test/features/order/presentation/pages/order_history_page_test.dart`（新規作成予定）

---

## 🚀 次のアクション

1. **即座に実施**:
   - ドキュメントのレビュー
   - 推奨案の承認

2. **短期（1週間以内）**:
   - Phase 1の実装開始
   - 基本的なテストの実施

3. **中期（2週間以内）**:
   - Phase 2の実装
   - ユーザーフィードバックの収集開始

4. **長期（1ヶ月以内、オプション）**:
   - Phase 3の実装検討
   - デザイントークンの整理

---

## 📝 変更履歴

| 日付 | 内容 | 担当者 |
|------|------|--------|
| 2025-10-01 | 初版作成、4つのドキュメント完成 | - |

---

## 💡 参考情報

### デザイン参考
- Material Design Guidelines - Lists
- Flutter Layout Best Practices

### 既存実装
- `YataDataTable`コンポーネント（案Bで活用可能）
- `YataSectionCard`コンポーネント
- `ResponsiveHelper`ユーティリティ

---

**このドキュメント群により、注文履歴カードの改善を体系的かつ段階的に進めることができます。**
